# V3.0 å¼€å‘è®¡åˆ’

**ç‰ˆæœ¬**: V3.0
**å¼€å§‹æ—¥æœŸ**: 2025-01-07
**é¢„è®¡å®Œæˆ**: 2025-02-28 (8å‘¨)
**å¼€å‘é‡ç‚¹**: æ™ºèƒ½åŒ– + å¤šæ¨¡æ€å­¦ä¹  + ç¤¾äº¤åŒ–

---

## ğŸ¯ ç‰ˆæœ¬ç›®æ ‡

V3.0æ˜¯ä¸€ä¸ª**é‡å¤§å‡çº§ç‰ˆæœ¬**ï¼Œå°†è¯æ±‡å­¦ä¹ åº”ç”¨æå‡åˆ°**æ™ºèƒ½åŒ–ã€å¤šæ¨¡æ€ã€ç¤¾äº¤åŒ–**çš„æ–°é«˜åº¦ï¼Œé€šè¿‡AIæŠ€æœ¯å’Œåˆ›æ–°å­¦ä¹ æ–¹å¼ï¼Œæ‰“é€ ä¸šç•Œé¢†å…ˆçš„è¯æ±‡å­¦ä¹ äº§å“ã€‚

### æ ¸å¿ƒä»·å€¼ä¸»å¼ 
1. **å›¾åƒè®°å¿†** â†’ è§†è§‰åŒ–å­¦ä¹  â†’ è®°å¿†æ•ˆæœæå‡5å€
2. **è¯æ ¹è¯ç¼€** â†’ ç³»ç»ŸåŒ–ç†è§£ â†’ ä¸¾ä¸€åä¸‰èƒ½åŠ›
3. **PWAç¦»çº¿** â†’ éšæ—¶éšåœ°å­¦ä¹  â†’ ç”¨æˆ·ç²˜æ€§â†‘
4. **AIå‘éŸ³è¯„æµ‹** â†’ æ ‡å‡†åŒ–å‘éŸ³ â†’ å£è¯­èƒ½åŠ›â†‘
5. **ç¤¾äº¤å­¦ä¹ ** â†’ ç¤¾åŒºé©±åŠ¨ â†’ ç”¨æˆ·ç•™å­˜â†‘â†‘

---

## â­ æ ¸å¿ƒåŠŸèƒ½ (5ä¸ª)

### 1. å›¾åƒè”æƒ³è®°å¿†ç³»ç»Ÿ â­â­â­â­â­

**ä¼˜å…ˆçº§**: P0 - æœ€é«˜ä¼˜å…ˆçº§

**ç§‘å­¦ä¾æ®**:
- å›¾åƒè®°å¿†æ³•æ˜¯è®°å¿†å¤§å¸ˆçš„æ ¸å¿ƒæŠ€æœ¯
- è§†è§‰è®°å¿†æ¯”æ–‡å­—è®°å¿†æ•ˆæœæå‡3-5å€
- è”æƒ³è®°å¿†æ³•å¢å¼ºé•¿æœŸè®°å¿†

**ç”¨æˆ·ä»·å€¼**:
- å•è¯è®°å¿†æ•ˆæœæå‡5å€
- é™ä½è®°å¿†éš¾åº¦
- å­¦ä¹ è¿‡ç¨‹æ›´æœ‰è¶£

**åŠŸèƒ½ç‰¹æ€§**:

1. **æ™ºèƒ½å›¾ç‰‡åŒ¹é…**
   - ä¸º1000+å•è¯é…å›¾
   - ä½¿ç”¨Unsplash APIè‡ªåŠ¨è·å–é«˜è´¨é‡å›¾ç‰‡
   - AIç­›é€‰æœ€ç›¸å…³çš„å›¾ç‰‡
   - äººå·¥å®¡æ ¸ç¡®ä¿è´¨é‡

2. **è®°å¿†å¡ç‰‡æ¨¡å¼**
   - å•è¯ + å›¾ç‰‡ + é‡Šä¹‰ + ä¾‹å¥
   - ç¿»è½¬å¡ç‰‡äº¤äº’
   - å›¾ç‰‡è”æƒ³è®°å¿†æç¤º
   - ä¿å­˜å–œæ¬¢çš„å›¾ç‰‡

3. **å›¾ç‰‡å­¦ä¹ æ¨¡å¼**
   - çœ‹å›¾çŒœå•è¯æ¸¸æˆ
   - å›¾ç‰‡é…å¯¹ç»ƒä¹ 
   - å›¾åƒè®°å¿†æµ‹è¯•

4. **å›¾ç‰‡åº“ç®¡ç†**
   - ç”¨æˆ·å¯ä¸Šä¼ è‡ªå·±çš„è®°å¿†å›¾ç‰‡
   - ç¤¾åŒºå…±äº«ä¼˜è´¨å›¾ç‰‡
   - å›¾ç‰‡æŠ•ç¥¨å’Œæ¨è

**æ•°æ®ç»“æ„**:
```sql
CREATE TABLE word_images (
  id UUID PRIMARY KEY,
  word_id VARCHAR(100) NOT NULL,
  image_url TEXT NOT NULL,
  image_source VARCHAR(50), -- unsplash/user_upload/admin
  photographer VARCHAR(200),
  unsplash_id VARCHAR(100),
  likes_count INT DEFAULT 0,
  usage_count INT DEFAULT 0,
  is_approved BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE user_word_images (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  word_id VARCHAR(100),
  image_id UUID REFERENCES word_images(id),
  is_liked BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW()
);
```

**æŠ€æœ¯å®ç°**:
```javascript
class ImageMemoryService {
  async getWordImages(wordId) {
    // ä»Unsplash APIè·å–ç›¸å…³å›¾ç‰‡
    const response = await fetch(
      `https://api.unsplash.com/search/photos?query=${wordId}&per_page=5`,
      { headers: { Authorization: `Client-ID ${UNSPLASH_ACCESS_KEY}` } }
    );
    return await response.json();
  }

  async saveWordImage(wordId, imageData) {
    // ä¿å­˜å›¾ç‰‡åˆ°æ•°æ®åº“
    const { data, error } = await supabase
      .from('word_images')
      .insert({
        word_id: wordId,
        image_url: imageData.urls.regular,
        image_source: 'unsplash',
        photographer: imageData.user.name,
        unsplash_id: imageData.id
      });
    return { data, error };
  }
}
```

**é¢„è®¡å·¥ä½œé‡**: 2000 lines + å›¾ç‰‡æ•°æ®å‡†å¤‡

---

### 2. è¯æ ¹è¯ç¼€å­¦ä¹ ç³»ç»Ÿ â­â­â­â­â­

**ä¼˜å…ˆçº§**: P0 - æœ€é«˜ä¼˜å…ˆçº§

**ç§‘å­¦ä¾æ®**:
- è‹±è¯­ä¸­70%çš„å•è¯å¯é€šè¿‡è¯æ ¹è¯ç¼€ç†è§£
- æŒæ¡500ä¸ªè¯æ ¹å¯æ¨æµ‹30000+å•è¯å«ä¹‰
- ç³»ç»ŸåŒ–å­¦ä¹ æå‡è¯æ±‡é‡å¢é•¿é€Ÿåº¦

**ç”¨æˆ·ä»·å€¼**:
- ä¸¾ä¸€åä¸‰ï¼Œå¿«é€Ÿæ‰©å±•è¯æ±‡é‡
- ç†è§£å•è¯æ„æˆè§„å¾‹
- æå‡è¯æ±‡å­¦ä¹ æ•ˆç‡10å€

**åŠŸèƒ½ç‰¹æ€§**:

1. **è¯æ ¹è¯ç¼€åº“**
   - 500ä¸ªå¸¸ç”¨è¯æ ¹ï¼ˆå¦‚ï¼šject=throw, port=carryï¼‰
   - 300ä¸ªå¸¸ç”¨å‰ç¼€ï¼ˆå¦‚ï¼špre-, re-, un-ï¼‰
   - 200ä¸ªå¸¸ç”¨åç¼€ï¼ˆå¦‚ï¼š-tion, -able, -lyï¼‰
   - æ¯ä¸ªè¯æ ¹çš„è¯¦ç»†è§£é‡Šå’Œæ¥æº

2. **è¯æ ¹åˆ†è§£**
   - å•è¯è‡ªåŠ¨æ‹†åˆ†è¯æ ¹è¯ç¼€
   - å¯è§†åŒ–å±•ç¤ºå•è¯æ„æˆ
   - é¢œè‰²æ ‡æ³¨ä¸åŒéƒ¨åˆ†
   - è§£é‡Šå„éƒ¨åˆ†å«ä¹‰

3. **è¯æ ¹å®¶æ—**
   - æ˜¾ç¤ºåŒè¯æ ¹çš„æ‰€æœ‰å•è¯
   - è¯æ ¹å®¶æ—æ ‘çŠ¶å›¾
   - éš¾åº¦åˆ†çº§ï¼ˆåˆçº§/ä¸­çº§/é«˜çº§ï¼‰
   - æ‰¹é‡å­¦ä¹ åŒæ—å•è¯

4. **è¯æ ¹ç»ƒä¹ **
   - è¯æ ¹è¯ç¼€åŒ¹é…æ¸¸æˆ
   - å•è¯æ‹†åˆ†ç»ƒä¹ 
   - è¯æ ¹æ¨æµ‹å•è¯å«ä¹‰

**æ•°æ®ç»“æ„**:
```sql
CREATE TABLE word_roots (
  id UUID PRIMARY KEY,
  root VARCHAR(50) NOT NULL UNIQUE,
  meaning VARCHAR(200) NOT NULL,
  origin VARCHAR(100), -- latin/greek/french
  example_words TEXT[],
  usage_frequency INT DEFAULT 0,
  difficulty_level INT CHECK (difficulty_level BETWEEN 1 AND 5)
);

CREATE TABLE word_affixes (
  id UUID PRIMARY KEY,
  affix VARCHAR(50) NOT NULL UNIQUE,
  type VARCHAR(20) NOT NULL, -- prefix/suffix
  meaning VARCHAR(200) NOT NULL,
  example_words TEXT[]
);

CREATE TABLE word_etymology (
  id UUID PRIMARY KEY,
  word_id VARCHAR(100) NOT NULL,
  roots UUID[] REFERENCES word_roots(id),
  prefixes UUID[] REFERENCES word_affixes(id),
  suffixes UUID[] REFERENCES word_affixes(id),
  explanation TEXT
);
```

**UIå±•ç¤ºç¤ºä¾‹**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  transport  è¯æ ¹åˆ†è§£                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚   trans-    port                    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”   â”œâ”€â”€â”€â”€â”€â”                 â”‚
â”‚   across    carry                   â”‚
â”‚   æ¨ªè¿‡      æºå¸¦                     â”‚
â”‚                                      â”‚
â”‚  å«ä¹‰: è¿è¾“ (æ¨ªè¿‡åœ°æºå¸¦)             â”‚
â”‚                                      â”‚
â”‚  åŒæ—å•è¯:                           â”‚
â”‚  â€¢ export (ex-å‡º + port-å¸¦)         â”‚
â”‚  â€¢ import (im-å…¥ + port-å¸¦)         â”‚
â”‚  â€¢ portable (port-å¸¦ + -able-èƒ½)    â”‚
â”‚  â€¢ porter (port-å¸¦ + -er-äºº)        â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¢„è®¡å·¥ä½œé‡**: 1800 lines + è¯æ ¹æ•°æ®å‡†å¤‡

---

### 3. PWAç¦»çº¿å­¦ä¹ æ¨¡å¼ â­â­â­â­â­

**ä¼˜å…ˆçº§**: P0 - æœ€é«˜ä¼˜å…ˆçº§

**ç”¨æˆ·ä»·å€¼**:
- åœ°é“ã€é£æœºä¸Šä¹Ÿèƒ½å­¦ä¹ 
- èŠ‚çœæµé‡
- ç”¨æˆ·ç²˜æ€§æå‡50%+

**åŠŸèƒ½ç‰¹æ€§**:

1. **Service Worker**
   - ç¼“å­˜æ ¸å¿ƒèµ„æºï¼ˆHTML/CSS/JSï¼‰
   - ç¼“å­˜å•è¯æ•°æ®
   - ç¼“å­˜å›¾ç‰‡èµ„æº
   - ç¦»çº¿ä¼˜å…ˆç­–ç•¥

2. **ç¦»çº¿æ•°æ®åŒæ­¥**
   - å­¦ä¹ è¿›åº¦æœ¬åœ°ç¼“å­˜
   - ç½‘ç»œæ¢å¤åè‡ªåŠ¨åŒæ­¥
   - å†²çªè§£å†³æœºåˆ¶
   - åŒæ­¥çŠ¶æ€æ˜¾ç¤º

3. **PWAå®‰è£…**
   - æ·»åŠ åˆ°ä¸»å±å¹•
   - å…¨å±ä½“éªŒ
   - åº”ç”¨å›¾æ ‡å’Œå¯åŠ¨ç”»é¢
   - æ¨é€é€šçŸ¥ï¼ˆå­¦ä¹ æé†’ï¼‰

4. **ç¦»çº¿æ£€æµ‹**
   - å®æ—¶ç½‘ç»œçŠ¶æ€ç›‘æµ‹
   - ç¦»çº¿æç¤ºUI
   - é™çº§åŠŸèƒ½ï¼ˆç¦ç”¨äº‘ç«¯åŠŸèƒ½ï¼‰

**æŠ€æœ¯å®ç°**:
```javascript
// service-worker.js
const CACHE_NAME = 'vocab-game-v3.0';
const urlsToCache = [
  '/',
  '/css/main.css',
  '/js/app.js',
  '/data/words.json'
];

self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then((cache) => cache.addAll(urlsToCache))
  );
});

self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request)
      .then((response) => response || fetch(event.request))
  );
});
```

**manifest.json**:
```json
{
  "name": "è¯æ±‡å­¦ä¹ æ¸¸æˆ",
  "short_name": "è¯æ±‡æ¸¸æˆ",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#4F46E5",
  "icons": [
    {
      "src": "/assets/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/assets/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

**é¢„è®¡å·¥ä½œé‡**: 800 lines

---

### 4. AIå‘éŸ³è¯„æµ‹ç³»ç»Ÿ â­â­â­â­â­

**ä¼˜å…ˆçº§**: P1 - é«˜ä¼˜å…ˆçº§

**ç”¨æˆ·ä»·å€¼**:
- çº æ­£å‘éŸ³é”™è¯¯
- æå‡å£è¯­èƒ½åŠ›
- å¢å¼ºå­¦ä¹ è‡ªä¿¡

**åŠŸèƒ½ç‰¹æ€§**:

1. **è¯­éŸ³è¯†åˆ«**
   - Web Speech API (Chrome/Edge)
   - å®æ—¶è¯­éŸ³è½¬æ–‡å­—
   - å‡†ç¡®åº¦è¯„åˆ†ï¼ˆ0-100åˆ†ï¼‰
   - éŸ³æ ‡å¯¹æ¯”

2. **å‘éŸ³è¯„æµ‹**
   - å•è¯å‘éŸ³å‡†ç¡®åº¦
   - éŸ³èŠ‚é‡éŸ³æ£€æµ‹
   - å¸¸è§é”™è¯¯æç¤º
   - å‘éŸ³å»ºè®®

3. **è·Ÿè¯»ç»ƒä¹ **
   - æ ‡å‡†å‘éŸ³æ’­æ”¾
   - å½•éŸ³è·Ÿè¯»
   - å¯¹æ¯”æ’­æ”¾
   - æ³¢å½¢å›¾æ˜¾ç¤º

4. **å‘éŸ³æŠ¥å‘Š**
   - å‘éŸ³å‡†ç¡®ç‡ç»Ÿè®¡
   - è–„å¼±éŸ³ç´ åˆ†æ
   - è¿›æ­¥æ›²çº¿å›¾
   - ç»ƒä¹ å»ºè®®

**æŠ€æœ¯å®ç°**:
```javascript
class PronunciationService {
  constructor() {
    this.recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    this.recognition.lang = 'en-US';
    this.recognition.continuous = false;
  }

  async evaluatePronunciation(targetWord) {
    return new Promise((resolve) => {
      this.recognition.onresult = (event) => {
        const spokenWord = event.results[0][0].transcript.toLowerCase();
        const confidence = event.results[0][0].confidence;

        const score = this.calculateScore(targetWord, spokenWord, confidence);
        resolve({ spokenWord, score, confidence });
      };

      this.recognition.start();
    });
  }

  calculateScore(target, spoken, confidence) {
    // Levenshteinè·ç¦»ç®—æ³•è®¡ç®—ç›¸ä¼¼åº¦
    const similarity = this.levenshteinSimilarity(target, spoken);
    return Math.round(similarity * confidence * 100);
  }
}
```

**é¢„è®¡å·¥ä½œé‡**: 1200 lines

---

### 5. ç¤¾äº¤å­¦ä¹ åŠŸèƒ½ â­â­â­â­

**ä¼˜å…ˆçº§**: P2 - ä¸­ä¼˜å…ˆçº§

**ç”¨æˆ·ä»·å€¼**:
- ç¤¾åŒºé©±åŠ¨å­¦ä¹ 
- ç«äº‰æ¿€åŠ±
- ç”¨æˆ·ç•™å­˜æå‡

**åŠŸèƒ½ç‰¹æ€§**:

1. **å¥½å‹ç³»ç»Ÿ**
   - æ·»åŠ å¥½å‹
   - å¥½å‹åŠ¨æ€
   - å­¦ä¹ è¿›åº¦å¯¹æ¯”
   - äº’ç›¸é¼“åŠ±

2. **æ’è¡Œæ¦œ**
   - æ¯æ—¥å­¦ä¹ æ’è¡Œ
   - æ¯å‘¨è¿ç»­å¤©æ•°æ’è¡Œ
   - å•è¯é‡æ’è¡Œ
   - å‡†ç¡®ç‡æ’è¡Œ

3. **å­¦ä¹ å°ç»„**
   - åˆ›å»º/åŠ å…¥å°ç»„
   - å°ç»„å­¦ä¹ è®¡åˆ’
   - å°ç»„æŒ‘æˆ˜èµ›
   - å°ç»„ç§¯åˆ†

4. **æˆå°±åˆ†äº«**
   - ç”Ÿæˆç²¾ç¾åˆ†äº«å¡ç‰‡
   - åˆ†äº«åˆ°ç¤¾äº¤åª’ä½“
   - æœ‹å‹åœˆåˆ†äº«
   - é‚€è¯·å¥½å‹

**æ•°æ®ç»“æ„**:
```sql
CREATE TABLE friendships (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  friend_id UUID REFERENCES auth.users(id),
  status VARCHAR(20), -- pending/accepted/blocked
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE study_groups (
  id UUID PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  description TEXT,
  creator_id UUID REFERENCES auth.users(id),
  member_count INT DEFAULT 0,
  is_public BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE group_members (
  id UUID PRIMARY KEY,
  group_id UUID REFERENCES study_groups(id),
  user_id UUID REFERENCES auth.users(id),
  role VARCHAR(20), -- admin/member
  joined_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE leaderboards (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  period VARCHAR(20), -- daily/weekly/monthly
  metric VARCHAR(50), -- words_learned/streak/accuracy
  score INT NOT NULL,
  rank INT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

**é¢„è®¡å·¥ä½œé‡**: 1500 lines

---

## ğŸ“Š æ•°æ®åº“Schemaæ›´æ–°

å®Œæ•´çš„V3.0æ•°æ®åº“æ›´æ–°è„šæœ¬ï¼š

```sql
-- V3.0 Schema Updates

-- 1. å›¾åƒè®°å¿†è¡¨
CREATE TABLE word_images (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  word_id VARCHAR(100) NOT NULL,
  image_url TEXT NOT NULL,
  image_source VARCHAR(50),
  photographer VARCHAR(200),
  unsplash_id VARCHAR(100),
  likes_count INT DEFAULT 0,
  usage_count INT DEFAULT 0,
  is_approved BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_word_images_word_id ON word_images(word_id);
CREATE INDEX idx_word_images_approved ON word_images(is_approved);

-- 2. ç”¨æˆ·å›¾ç‰‡å…³è”è¡¨
CREATE TABLE user_word_images (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  word_id VARCHAR(100),
  image_id UUID REFERENCES word_images(id) ON DELETE CASCADE,
  is_liked BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_user_word_images_user_id ON user_word_images(user_id);

-- 3. è¯æ ¹è¡¨
CREATE TABLE word_roots (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  root VARCHAR(50) NOT NULL UNIQUE,
  meaning VARCHAR(200) NOT NULL,
  origin VARCHAR(100),
  example_words TEXT[],
  usage_frequency INT DEFAULT 0,
  difficulty_level INT CHECK (difficulty_level BETWEEN 1 AND 5),
  created_at TIMESTAMP DEFAULT NOW()
);

-- 4. è¯ç¼€è¡¨
CREATE TABLE word_affixes (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  affix VARCHAR(50) NOT NULL UNIQUE,
  type VARCHAR(20) NOT NULL CHECK (type IN ('prefix', 'suffix')),
  meaning VARCHAR(200) NOT NULL,
  example_words TEXT[],
  created_at TIMESTAMP DEFAULT NOW()
);

-- 5. è¯æºåˆ†è§£è¡¨
CREATE TABLE word_etymology (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  word_id VARCHAR(100) NOT NULL UNIQUE,
  root_ids UUID[],
  prefix_ids UUID[],
  suffix_ids UUID[],
  explanation TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 6. å‘éŸ³è®°å½•è¡¨
CREATE TABLE pronunciation_records (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  word_id VARCHAR(100) NOT NULL,
  spoken_text VARCHAR(100),
  confidence FLOAT,
  score INT CHECK (score BETWEEN 0 AND 100),
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_pronunciation_user_word ON pronunciation_records(user_id, word_id);

-- 7. å¥½å‹å…³ç³»è¡¨
CREATE TABLE friendships (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  friend_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  status VARCHAR(20) CHECK (status IN ('pending', 'accepted', 'blocked')),
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, friend_id)
);

CREATE INDEX idx_friendships_user ON friendships(user_id);
CREATE INDEX idx_friendships_status ON friendships(status);

-- 8. å­¦ä¹ å°ç»„è¡¨
CREATE TABLE study_groups (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  description TEXT,
  creator_id UUID REFERENCES auth.users(id),
  member_count INT DEFAULT 0,
  is_public BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 9. å°ç»„æˆå‘˜è¡¨
CREATE TABLE group_members (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  group_id UUID REFERENCES study_groups(id) ON DELETE CASCADE,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  role VARCHAR(20) CHECK (role IN ('admin', 'member')),
  joined_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(group_id, user_id)
);

-- 10. æ’è¡Œæ¦œè¡¨
CREATE TABLE leaderboards (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  period VARCHAR(20) CHECK (period IN ('daily', 'weekly', 'monthly')),
  metric VARCHAR(50) CHECK (metric IN ('words_learned', 'streak', 'accuracy')),
  score INT NOT NULL,
  rank INT,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_leaderboards_period_metric ON leaderboards(period, metric, score DESC);

-- 11. ç”¨æˆ·é…ç½®æ‰©å±•
ALTER TABLE user_profiles
ADD COLUMN IF NOT EXISTS enable_offline_mode BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS enable_pronunciation_practice BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS enable_image_memory BOOLEAN DEFAULT true,
ADD COLUMN IF NOT EXISTS preferred_voice VARCHAR(20) DEFAULT 'en-US',
ADD COLUMN IF NOT EXISTS speech_rate FLOAT DEFAULT 1.0;
```

---

## ğŸ—‚ï¸ æ–‡ä»¶ç»“æ„

```
prototype/
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ ImageMemoryService.js          âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ EtymologyService.js            âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ PronunciationService.js        âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ SocialService.js               âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ OfflineService.js              âœ¨ æ–°å¢
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ImageMemoryView.js             âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ EtymologyView.js               âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ PronunciationView.js           âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ LeaderboardView.js             âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ StudyGroupView.js              âœ¨ æ–°å¢
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ app.js                              âœï¸ ä¿®æ”¹
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ image-memory.css                   âœ¨ æ–°å¢
â”‚   â”œâ”€â”€ etymology.css                      âœ¨ æ–°å¢
â”‚   â”œâ”€â”€ pronunciation.css                  âœ¨ æ–°å¢
â”‚   â”œâ”€â”€ social.css                         âœ¨ æ–°å¢
â”‚   â””â”€â”€ ...
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ word_roots.json                    âœ¨ æ–°å¢ (500ä¸ªè¯æ ¹)
â”‚   â”œâ”€â”€ word_affixes.json                  âœ¨ æ–°å¢ (500ä¸ªè¯ç¼€)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ icons/
â”‚   â”‚   â”œâ”€â”€ icon-192.png                   âœ¨ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ icon-512.png                   âœ¨ æ–°å¢
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â”œâ”€â”€ service-worker.js                      âœ¨ æ–°å¢
â”œâ”€â”€ manifest.json                          âœ¨ æ–°å¢
â””â”€â”€ supabase-schema-update-v3.0.sql        âœ¨ æ–°å¢
```

---

## ğŸš€ å¼€å‘é‡Œç¨‹ç¢‘ (8å‘¨)

### Week 1-2: å›¾åƒè®°å¿†ç³»ç»Ÿ (2025-01-07 ~ 2025-01-20)
- [ ] åˆ›å»ºæ•°æ®åº“è¡¨
- [ ] é›†æˆUnsplash API
- [ ] å®ç°å›¾ç‰‡æœç´¢å’Œä¿å­˜
- [ ] åˆ›å»ºè®°å¿†å¡ç‰‡UI
- [ ] å®ç°å›¾ç‰‡å­¦ä¹ æ¨¡å¼
- [ ] å‡†å¤‡1000ä¸ªå•è¯çš„å›¾ç‰‡

### Week 3-4: è¯æ ¹è¯ç¼€ç³»ç»Ÿ (2025-01-21 ~ 2025-02-03)
- [ ] å‡†å¤‡è¯æ ¹è¯ç¼€æ•°æ®åº“ï¼ˆ500ä¸ªè¯æ ¹ï¼‰
- [ ] åˆ›å»ºè¯æ ¹æœåŠ¡å±‚
- [ ] å®ç°è¯æ ¹åˆ†è§£åŠŸèƒ½
- [ ] å®ç°è¯æ ¹å®¶æ—å±•ç¤º
- [ ] åˆ›å»ºè¯æ ¹ç»ƒä¹ æ¨¡å—
- [ ] UI/UXä¼˜åŒ–

### Week 5: PWAç¦»çº¿æ¨¡å¼ (2025-02-04 ~ 2025-02-10)
- [ ] ç¼–å†™Service Worker
- [ ] åˆ›å»ºmanifest.json
- [ ] å®ç°ç¼“å­˜ç­–ç•¥
- [ ] å®ç°ç¦»çº¿æ•°æ®åŒæ­¥
- [ ] è®¾è®¡åº”ç”¨å›¾æ ‡
- [ ] æµ‹è¯•ç¦»çº¿åŠŸèƒ½

### Week 6: AIå‘éŸ³è¯„æµ‹ (2025-02-11 ~ 2025-02-17)
- [ ] é›†æˆWeb Speech API
- [ ] å®ç°è¯­éŸ³è¯†åˆ«
- [ ] å®ç°è¯„åˆ†ç®—æ³•
- [ ] åˆ›å»ºè·Ÿè¯»ç»ƒä¹ UI
- [ ] å®ç°å‘éŸ³æŠ¥å‘Š
- [ ] æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

### Week 7: ç¤¾äº¤åŠŸèƒ½ (2025-02-18 ~ 2025-02-24)
- [ ] å®ç°å¥½å‹ç³»ç»Ÿ
- [ ] å®ç°æ’è¡Œæ¦œ
- [ ] å®ç°å­¦ä¹ å°ç»„
- [ ] å®ç°åˆ†äº«åŠŸèƒ½
- [ ] UI/UXè®¾è®¡
- [ ] éšç§å’Œå®‰å…¨è®¾ç½®

### Week 8: æµ‹è¯•å’Œéƒ¨ç½² (2025-02-25 ~ 2025-02-28)
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] Bugä¿®å¤
- [ ] ä»£ç å®¡æŸ¥
- [ ] æ–‡æ¡£å®Œå–„
- [ ] éƒ¨ç½²ä¸Šçº¿

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

| æŒ‡æ ‡ | V2.2åŸºå‡† | V3.0ç›®æ ‡ | æå‡ |
|------|---------|---------|------|
| å•è¯è®°å¿†æ•ˆæœ | +150% | +500% | å›¾åƒè®°å¿† |
| è¯æ±‡é‡å¢é•¿é€Ÿåº¦ | åŸºå‡† | +1000% | è¯æ ¹ç³»ç»Ÿ |
| ç¦»çº¿ä½¿ç”¨ç‡ | 0% | 40% | PWAåŠŸèƒ½ |
| å‘éŸ³å‡†ç¡®åº¦ | æ— æ•°æ® | 80%+ | AIè¯„æµ‹ |
| ç”¨æˆ·ç•™å­˜ç‡ | 35% | 60% | +71% |
| æ—¥æ´»è·ƒæ—¶é•¿ | 20åˆ†é’Ÿ | 30åˆ†é’Ÿ | +50% |
| ç¤¾äº¤äº’åŠ¨ç‡ | 0% | 30% | æ–°åŠŸèƒ½ |

---

## ğŸ’° æˆæœ¬ä¼°ç®—

### APIæˆæœ¬
- **Unsplash API**: å…è´¹ï¼ˆ5000æ¬¡/å°æ—¶ï¼‰
- **Web Speech API**: å…è´¹ï¼ˆæµè§ˆå™¨å†…ç½®ï¼‰
- **Supabase**: å…è´¹å¥—é¤ â†’ ä»˜è´¹$25/æœˆï¼ˆç”¨æˆ·å¢é•¿åï¼‰

### å¼€å‘æˆæœ¬
- **å¼€å‘æ—¶é—´**: 8å‘¨
- **ä»£ç é‡**: ~10000 lines
- **æ•°æ®å‡†å¤‡**: 1å‘¨ï¼ˆè¯æ ¹è¯ç¼€ + å›¾ç‰‡ï¼‰

---

## âš ï¸ é£é™©å’ŒæŒ‘æˆ˜

### 1. Unsplash APIé™åˆ¶
**é£é™©**: å…è´¹APIæœ‰è¯·æ±‚é™åˆ¶
**ç¼“è§£**:
- ç¼“å­˜å›¾ç‰‡URL
- ä¼˜å…ˆä½¿ç”¨å·²æœ‰å›¾ç‰‡
- è€ƒè™‘ä»˜è´¹å‡çº§

### 2. æµè§ˆå™¨å…¼å®¹æ€§
**é£é™©**: PWAå’Œè¯­éŸ³è¯†åˆ«ä¸æ”¯æŒæ‰€æœ‰æµè§ˆå™¨
**ç¼“è§£**:
- åŠŸèƒ½æ£€æµ‹å’Œé™çº§
- æ¨èChrome/Edge
- æä¾›æ›¿ä»£æ–¹æ¡ˆ

### 3. æ•°æ®é‡å¤§
**é£é™©**: 1000å¼ å›¾ç‰‡ + 500ä¸ªè¯æ ¹æ•°æ®é‡å¤§
**ç¼“è§£**:
- æ‡’åŠ è½½
- å›¾ç‰‡å‹ç¼©
- CDNåŠ é€Ÿ

### 4. ç¤¾äº¤åŠŸèƒ½å¤æ‚
**é£é™©**: å¥½å‹ã€å°ç»„åŠŸèƒ½å¼€å‘å¤æ‚
**ç¼“è§£**:
- åˆ†é˜¶æ®µå®ç°
- MVPç‰ˆæœ¬å…ˆä¸Šçº¿
- é€æ­¥å®Œå–„

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

1. **åŠŸèƒ½å®Œæ•´æ€§** âœ…
   - [ ] 1000ä¸ªå•è¯æœ‰å›¾ç‰‡
   - [ ] 500ä¸ªè¯æ ¹æ•°æ®å®Œæ•´
   - [ ] PWAå¯å®‰è£…
   - [ ] å‘éŸ³è¯„æµ‹å¯ç”¨
   - [ ] æ’è¡Œæ¦œæ­£å¸¸

2. **ä»£ç è´¨é‡** âœ…
   - [ ] æ‰€æœ‰ä»£ç æœ‰æ³¨é‡Š
   - [ ] é”™è¯¯å¤„ç†å®Œå–„
   - [ ] æ€§èƒ½ä¼˜åŒ–

3. **ç”¨æˆ·ä½“éªŒ** âœ…
   - [ ] å“åº”é€Ÿåº¦å¿«
   - [ ] åŠ¨ç”»æµç•…
   - [ ] ç¦»çº¿å¯ç”¨

4. **æ•°æ®å‡†ç¡®æ€§** âœ…
   - [ ] å›¾ç‰‡ç›¸å…³åº¦é«˜
   - [ ] è¯æ ¹è§£é‡Šå‡†ç¡®
   - [ ] å‘éŸ³è¯„åˆ†åˆç†

---

**V3.0 = æ™ºèƒ½åŒ– + å¤šæ¨¡æ€ + ç¤¾äº¤åŒ–**

*è®¡åˆ’åˆ›å»ºæ—¶é—´: 2025-12-10*
*é¢„è®¡å¼€å§‹æ—¶é—´: 2025-01-07*
*é¢„è®¡å®Œæˆæ—¶é—´: 2025-02-28*
*é¢„è®¡å·¥ä½œé‡: ~10000 lines*
